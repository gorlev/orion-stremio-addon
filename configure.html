<!DOCTYPE html>
<html style="background-image: url(https://orionoid.com/web/images/background/banner.jpg)">
  <head>
    <meta charset="utf-8" />
    <title>Orion Stremio Addon</title>
    <style>
      * {
        box-sizing: border-box;
      }

      body,
      html {
        margin: 0;
        padding: 0;
        /* width: 100%;
        height: 122%; */
        position: center center;
      }

      html {
        background-size: 100% auto;
        background-position: center center;
        background-repeat: no-repeat;
        background-attachment: fixed;
      }

      body {
        display: flex;
        background: rgba(0, 0, 0, 0.60);
        font-family: 'Open Sans', Arial, sans-serif;
        color: white;
      }

      h1 {
        font-size: 4.5vh;
        font-weight: 700;
      }

      h2 {
        font-size: 2.2vh;
        font-weight: normal;
        font-style: italic;
        opacity: 0.8;
      }

      h3 {
        font-size: 2.2vh;
      }

      h1,
      h2,
      h3,
      p {
        margin: 0;
        text-shadow: 0 0 1vh rgba(0, 0, 0, 0.15);
      }

      p {
        font-size: 1.75vh;
      }

      ul {
        font-size: 1.75vh;
        margin: 0;
        margin-top: 1vh;
        padding-left: 3vh;
      }

      a {
        color: white
      }

      a.install-link {
        text-decoration: none
      }

      button {
        border: 0;
        outline: 0;
        color: white;
        background: #8A5AAB;
        padding: 1.2vh 3.5vh;
        margin: auto;
        text-align: center;
        font-family: 'Open Sans', Arial, sans-serif;
        font-size: 2.2vh;
        font-weight: 600;
        cursor: pointer;
        display: block;
        box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
        transition: box-shadow 0.1s ease-in-out;
      }

      button:hover {
        box-shadow: none;
      }

      button:active {
        box-shadow: 0 0 0 0.5vh white inset;
      }

      #addon {
        width: 40vh;
        margin: auto;
      }

      .logo {
        height: 14vh;
        width: 14vh;
        margin: auto;
        margin-bottom: 3vh;
      }

      .logo img {
        width: 100%;
      }

      .name, .version {
        display: inline-block;
        vertical-align: top;
      }

      .name {
        line-height: 5vh;
      }

      .version {
        position: absolute;
        line-height: 5vh;
        margin-left: 1vh;
        opacity: 0.8;
      }

      .contact {
        position: absolute;
        left: 0;
        bottom: 4vh;
        width: 100%;
        text-align: center;
      }

      .contact a {
        font-size: 1.4vh;
        font-style: italic;
      }

      .separator {
        margin-bottom: 4vh;
      }

      #orionApi {
        width: 40vh;
        height: 5vh;
        padding: 0.5vh 0.5vh;
        margin: auto;
        border: 0.5vh solid #8a5aab;
        font-size: 2.2vh;
        cursor: text;
        display: block;
        box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
        transition: box-shadow 0.1s ease-in-out;
        color: #8a5aab;
    }
      #linkLimit {
          width: 40vh;
          height: 5vh;
          padding: 0.5vh 0.5vh;
          margin: auto;
          border: 0.5vh solid #8a5aab;
          font-size: 2.2vh;
          cursor: auto;
          display: block;
          box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
          transition: box-shadow 0.1s ease-in-out;
          color: #8a5aab;
      }
      /* #min-vid-quality {
          width: 40vh;
          height: 5vh;
          padding: 0.5vh 0.5vh;
          margin: auto;
          border: 0.5vh solid #8a5aab;
          font-size: 2.2vh;
          cursor: auto;
          display: block;
          box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
          transition: box-shadow 0.1s ease-in-out;
          color: #8a5aab;
      }
      #max-vid-quality {
          width: 40vh;
          height: 5vh;
          padding: 0.5vh 0.5vh;
          margin: auto;
          border: 0.5vh solid #8a5aab;
          font-size: 2.2vh;
          cursor: auto;
          display: block;
          box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
          transition: box-shadow 0.1s ease-in-out;
          color: #8a5aab;
      } */
      #sort-value {
          width: 40vh;
          height: 5vh;
          padding: 0.5vh 0.5vh;
          margin: auto;
          border: 0.5vh solid #8a5aab;
          font-size: 2.2vh;
          cursor: auto;
          display: block;
          box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
          transition: box-shadow 0.1s ease-in-out;
          color: #8a5aab;
      }
      /* #min-audio-channels {
          width: 40vh;
          height: 5vh;
          padding: 0.5vh 0.5vh;
          margin: auto;
          border: 0.5vh solid #8a5aab;
          font-size: 2.2vh;
          cursor: auto;
          display: block;
          box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
          transition: box-shadow 0.1s ease-in-out;
          color: #8a5aab;
      } */
      /* Tooltip container */
      .tooltip {
        position: relative;
        display: inline-block;
        border-bottom: 1px dotted black; /* If you want dots under the hoverable text */
      }

      /* Tooltip text */
      .tooltip .tooltiptext {
        visibility: hidden;
        width: 240px;
        background-color: black;
        color: #fff;
        text-align: center;
        padding: 10px 0;
        border-radius: 16px;
        top: -5px;
        left: 105%;
      
        /* Position the tooltip text - see examples below! */
        position: absolute;
        z-index: 1;
      }

      /* Show the tooltip text when you mouse over the tooltip container */
      .tooltip:hover .tooltiptext {
        visibility: visible;
      }
      /*------------------------------------------------------------------------*/
      .multiselect {
        width: 200px;
        background-color: #fff;
      }

      .selectBox {
        position: relative;
        background-color: #fff;
      }

      .selectBox select {
        /* width: 100%;
        font-weight: bold; */
        width: 40vh;
        height: 5vh;
        padding: 0.5vh 0.5vh;
        margin: auto;
        border: 0.5vh solid #8a5aab;
        font-size: 2.2vh;
        cursor: auto;
        display: block;
        box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
        transition: box-shadow 0.1s ease-in-out;
        color: #8a5aab;
      }

      .overSelect {
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
      }

      #checkboxesAudio {
        display: none;
        border: 1px #dadada solid;
        /* width: 40vh;
        height: 5vh;
        padding: 0.5vh 0.5vh;
        margin: auto;
        border: 0.5vh solid #8a5aab;
        font-size: 2.2vh;
        cursor: auto;
        display: block;
        box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
        transition: box-shadow 0.1s ease-in-out;
        color: #8a5aab; */
      }

      #checkboxesAudio label {
        /* display: block; */
        width: 40vh;
        height: 5vh;
        padding: 0.5vh 0.5vh;
        margin: auto;
        border: 0.5vh solid #8a5aab;
        font-size: 2.2vh;
        cursor: auto;
        display: block;
        box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
        transition: box-shadow 0.1s ease-in-out;
        color: #8a5aab;
        background-color: #fff;
      }

      #checkboxesAudio label:hover {
        background-color: #fff;
      }

      #checkboxesVideo {
        display: none;
        border: 1px #dadada solid;
      }

      #checkboxesVideo label {
        /* display: block; */
        width: 40vh;
        height: 5vh;
        padding: 0.5vh 0.5vh;
        margin: auto;
        border: 0.5vh solid #8a5aab;
        font-size: 2.2vh;
        cursor: auto;
        display: block;
        box-shadow: 0 0.5vh 1vh rgba(0, 0, 0, 0.2);
        transition: box-shadow 0.1s ease-in-out;
        color: #8a5aab;
        background-color: #fff;
      }

      #checkboxesVideo label:hover {
        background-color: #fff;
      }
    </style>
    <link
      rel="shortcut icon"
      href="https://orionoid.com/web/images/logo/logo256.png"
      type="image/x-icon"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700&display=swap"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  </head>

  <body>
    <div id="addon">
      <div class="logo">
        <img
          src="https://orionoid.com/web/images/logo/logo256.png"
        />
      </div>
      
      <h1 class="name">Orion</h1>
      <h2 class="version">1.1.0</h2>
      <h2 class="description">Orion Stremio Addon. Orion API key is required to use this addon. Get it from <a href="https://panel.orionoid.com/" target="_blank">panel.orionoid.com</a></h2>

      <div class="separator"></div>

      <h3 class="gives">This addon has more :</h3>
      <ul>
        <li>Movies</li>
        <li>Series</li>
        <li>Others</li>
      </ul>
      
      <div class="separator"></div>
      
      <h2 class="description">Orion API Key:</h2>
      <input type="text" id="orionApi" name="orionApiKey" placeholder="Enter your Orion API key here" onchange="generateInstallLink()">

      <div class="tooltip">
        <span class="tooltiptext">The maximum number of streams to return. If not specified, all available links are returned. Make sure to specify a limit, since without one you might use up the entire daily limit with one query.</span>
        <h2 class="description">Link Limit per Search:</h2>
        <input class="input" type="number" autocapitalize="off" id="linkLimit" placeholder="The maximum number of links to retrieve per scrape." value="5" onchange="generateInstallLink()" />  
      </div>
      
      <h2 class="description">Sort Value:</h2>
      <select id="sort-value" name="sort-value" onchange="generateInstallLink()">
        <option value="none">No Sorting</option>
        <option value="shuffle" >Random Shuffle</option>
        <option value="best">Sort By Best (PREMIUM)</option>
        <option value="popularity">Sort By User Popularity</option>
        <option value="timeupdated">Sort By Update Time</option>
        <option value="filesize">Sort By file Size</option>
        <option value="streamseeds" selected>Sort By Torrent Seeds</option>
        <option value="videoquality">Sort By Video Quality</option>
        <option value="audiochannels">Sort By Audio Channels</option>
      </select>

      <h2 class="description">Video Quality:</h2>
      <form>
        <div class="multiselect">
          <div class="selectBox" id="selectBox" onclick="showCheckboxesVideo()">
            <select>
              <option>Select Video Quality</option>
            </select>
            <div class="overSelect"></div>
          </div>
          <div id="checkboxesVideo" name="videoquality" onchange="generateInstallLink()">
              <label>
                <input type="checkbox" name="vquality" value="hd8k" />8K (HD) <input type="checkbox" name="vquality" value="scr1080"/>1080p (SCR) </label>
              <label>
                <input type="checkbox"  name="vquality" value="hd6k"/>6K (HD) <input type="checkbox" name="vquality" value="scr720"/>720p (SCR) </label>
              <label>
                <input type="checkbox"  name="vquality" value="hd4k" checked/>4K (HD) <input type="checkbox" name="vquality" value="scr"/>SCR </label>
                <label>
                  <input type="checkbox" name="vquality" value="hd2k" checked/>2K (HD) <input type="checkbox" name="vquality" value="cam1080"/>1080p (CAM)</label>
              <label>
                <input type="checkbox" name="vquality" value="hd1080"checked/>1080p (HD) <input type="checkbox" name="vquality" value="cam720"/>720p (CAM)</label>
                <label>
                  <input type="checkbox" name="vquality" value="hd720"checked/>720p (HD) <input type="checkbox" name="vquality" value="sd"/> SD <input type="checkbox" name="vquality" value="cam"/>CAM</label>
          </div>
        </div>
      </form>

      <h2 class="description">Audio Channels:</h2>
      <form>
        <div class="multiselect">
          <div class="selectBox" id="selectBox" onclick="showCheckboxesAudio()">
            <select>
              <option>Select Audio Channels</option>
            </select>
            <div class="overSelect"></div>
          </div>
          <div id="checkboxesAudio" name="audiochannels" onchange="generateInstallLink()">
            <label>
              <input type="checkbox" name="achannel" value="1"/>1 Channel (Mono)</label>
            <label>
              <input type="checkbox" name="achannel" value="2" checked/>2 Channels (Stereo</label>
            <label>
              <input type="checkbox" name="achannel" value="6" checked/>6 Channels (5.1) (Surround)</label>
            <label>
              <input type="checkbox" name="achannel" value="8" checked/>8 Channels (7.1) (Surround)</label>
          </div>
        </div>
      </form>

      <div class="separator"></div>
      
      <a id="installLink" class="install-link" href="#">
        <button name="Install">INSTALL</button>
      </a>
    </div>

    <script type="text/javascript">

      var expanded = false;

      function showCheckboxesAudio() {
        var checkboxes = document.getElementById("checkboxesAudio");
        if (!expanded) {
          checkboxes.style.display = "block";
          expanded = true;
        } else {
          checkboxes.style.display = "none";
          expanded = false;
        }
      }

      function showCheckboxesVideo() {
        var checkboxes = document.getElementById("checkboxesVideo");
        if (!expanded) {
          checkboxes.style.display = "block";
          expanded = true;
        } else {
          checkboxes.style.display = "none";
          expanded = false;
        }
      }

      function getAudioCheckBoxElements() {
        let audiochannels = []
        var markedCheckbox = document.getElementsByName('achannel')
        for (var checkbox of markedCheckbox) {  
          if (checkbox.checked)  
            audiochannels.push(checkbox.value);         }  
        return audiochannels
      }

      function getVideoCheckBoxElements() {
        let videoquality = []  
        var markedCheckbox = document.getElementsByName('vquality');
          for (var checkbox of markedCheckbox) {  
            if (checkbox.checked)  
              videoquality.push(checkbox.value); 
          }
          return videoquality  
      }

      function encode(userData) {
        // Encode to Base64, make URL safe
        return btoa(JSON.stringify(userData))
      }

      function generateInstallLink() {

        const apikey = $('#orionApi').val()
        const linkLimit = $('#linkLimit').val()
        const sortValue = $('#sort-value').val()

        let audiochannels = getAudioCheckBoxElements(document.getElementsByName('audiochannels').onclick).toString()

        let videoquality = getVideoCheckBoxElements(document.getElementsByName('videoquality').onclick).toString()
        

        const configuration = {
          api: apikey, linkLimit: linkLimit, sortValue:sortValue, audiochannels:audiochannels, videoquality:videoquality
        }

        const configurationEncoded = encode(configuration);

        if (apikey != '') {
          installLink.href = 'stremio://' + window.location.host + '/'  + configurationEncoded + '/manifest.json';
        }
      }
    </script>
  </body>
</html>
